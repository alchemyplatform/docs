- name: starknet_estimateFee
  summary: Estimate the fee for StarkNet transactions
  description: >
    Estimates the resources required by a given sequence of transactions when
    applied on a given state. If one of the transactions reverts or fails due
    to any reason (e.g., validation failure or an internal error), a
    TRANSACTION_EXECUTION_ERROR is returned. For v0-2 transactions the estimate
    is given in wei, and for v3 transactions it is given in fri.
  params:
    - name: request
      description: The transaction to estimate
      required: true
      schema:
        type: array
        description: >
          A sequence of transactions to estimate, running each transaction on
          the state resulting from applying all the previous ones
        title: Transaction
        items:
          $ref: "#/components/schemas/BROADCASTED_TXN"
    - name: simulation_flags
      description: Describes what parts of the transaction should be executed
      required: true
      schema:
        type: array
        items:
          $ref: "#/components/schemas/SIMULATION_FLAG_FOR_ESTIMATE_FEE"
    - name: block_id
      description: >
        The hash of the requested block, or number (height) of the requested
        block, or a block tag, for the block referencing the state or call the
        transaction on.
      required: true
      schema:
        title: Block id
        $ref: "#/components/schemas/BLOCK_ID"
  result:
    name: result
    description: The fee estimations
    schema:
      title: Estimation
      type: array
      description: >
        A sequence of fee estimations where the i'th estimate corresponds to
        the i'th transaction
      items:
        $ref: "#/components/schemas/FEE_ESTIMATE"
