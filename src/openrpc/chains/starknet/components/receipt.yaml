components:
  schemas:
    COMMON_RECEIPT_PROPERTIES:
      allOf:
        - title: Common receipt properties
          description: Common properties for a transaction receipt
          type: object
          required:
            - transaction_hash
            - actual_fee
            - finality_status
            - messages_sent
            - events
            - execution_resources
          properties:
            transaction_hash:
              title: Transaction hash
              $ref: "./base-types.yaml#/components/schemas/TXN_HASH"
              description: The hash identifying the transaction
            actual_fee:
              title: Actual fee
              $ref: "./client.yaml#/components/schemas/FEE_PAYMENT"
              description: The fee that was charged by the sequencer
            finality_status:
              title: Finality status
              description: Finality status of the transaction
              $ref: "./base-types.yaml#/components/schemas/TXN_FINALITY_STATUS"
            messages_sent:
              title: Messages sent
              type: array
              items:
                $ref: "./withdrawal.yaml#/components/schemas/MSG_TO_L1"
            events:
              title: Events
              description: The events emitted as part of this transaction
              type: array
              items:
                $ref: "./filter.yaml#/components/schemas/EVENT"
            execution_resources:
              title: Execution resources
              description: The resources consumed by the transaction
              $ref: "./client.yaml#/components/schemas/EXECUTION_RESOURCES"
        - oneOf:
            - title: Successful Common receipt properties
              description: Common properties for a transaction receipt that was executed successfully
              type: object
              required:
                - execution_status
              properties:
                execution_status:
                  title: Execution status
                  type: string
                  enum:
                    - SUCCEEDED
                  description: The execution status of the transaction
            - title: Reverted Common receipt properties
              description: Common properties for a transaction receipt that was reverted
              type: object
              required:
                - execution_status
                - revert_reason
              properties:
                execution_status:
                  title: Execution status
                  type: string
                  enum:
                    - REVERTED
                  description: The execution status of the transaction
                revert_reason:
                  title: Revert reason
                  description: The revert reason for the failed execution
                  type: string
    INVOKE_TXN_RECEIPT:
      title: Invoke Transaction Receipt
      allOf:
        - title: Type
          type: object
          required:
            - type
          properties:
            type:
              title: Type
              type: string
              enum:
                - INVOKE
        - $ref: "#/components/schemas/COMMON_RECEIPT_PROPERTIES"
    DECLARE_TXN_RECEIPT:
      title: Declare Transaction Receipt
      allOf:
        - title: Declare transaction receipt
          type: object
          required:
            - type
          properties:
            type:
              title: Declare
              type: string
              enum:
                - DECLARE
        - $ref: "#/components/schemas/COMMON_RECEIPT_PROPERTIES"
    DEPLOY_ACCOUNT_TXN_RECEIPT:
      title: Deploy Account Transaction Receipt
      allOf:
        - $ref: "#/components/schemas/COMMON_RECEIPT_PROPERTIES"
        - title: DeployAccount transaction receipt
          type: object
          required:
            - type
            - contract_address
          properties:
            type:
              title: Deploy account
              type: string
              enum:
                - DEPLOY_ACCOUNT
            contract_address:
              title: Contract address
              description: The address of the deployed contract
              $ref: "./base-types.yaml#/components/schemas/FELT"
    DEPLOY_TXN_RECEIPT:
      title: Deploy Transaction Receipt
      allOf:
        - $ref: "#/components/schemas/COMMON_RECEIPT_PROPERTIES"
        - title: Deploy transaction receipt
          type: object
          required:
            - type
            - contract_address
          properties:
            type:
              title: Deploy
              type: string
              enum:
                - DEPLOY
            contract_address:
              title: Contract address
              description: The address of the deployed contract
              $ref: "./base-types.yaml#/components/schemas/FELT"
    L1_HANDLER_TXN_RECEIPT:
      title: L1 Handler Transaction Receipt
      description: Receipt for L1 handler transaction
      allOf:
        - title: Transaction type
          type: object
          required:
            - type
            - message_hash
          properties:
            type:
              title: Type
              type: string
              enum:
                - L1_HANDLER
            message_hash:
              title: Message hash
              description: The message hash as it appears on the L1 core contract
              $ref: "./base-types.yaml#/components/schemas/NUM_AS_HEX"
        - $ref: "#/components/schemas/COMMON_RECEIPT_PROPERTIES"
    TXN_RECEIPT:
      title: Transaction Receipt
      oneOf:
        - $ref: "#/components/schemas/INVOKE_TXN_RECEIPT"
        - $ref: "#/components/schemas/L1_HANDLER_TXN_RECEIPT"
        - $ref: "#/components/schemas/DECLARE_TXN_RECEIPT"
        - $ref: "#/components/schemas/DEPLOY_TXN_RECEIPT"
        - $ref: "#/components/schemas/DEPLOY_ACCOUNT_TXN_RECEIPT"
    TXN_RECEIPT_WITH_BLOCK_INFO:
      title: Transaction receipt with block info
      allOf:
        - $ref: "#/components/schemas/TXN_RECEIPT"
        - type: object
          properties:
            block_hash:
              title: Block hash
              $ref: "./base-types.yaml#/components/schemas/BLOCK_HASH"
              description: If this field is missing, it means the receipt belongs to the pending block
            block_number:
              title: Block number
              $ref: "./base-types.yaml#/components/schemas/BLOCK_NUMBER"
              description: If this field is missing, it means the receipt belongs to the pending block
