EthSimulateV1:
  name: eth_simulateV1
  description: Enables simulation of complex transactions and state changes without modifying the blockchain.
  params:
    - name: Simulation object
      required: true
      description: The object containing all simulation details such as calls, overrides, etc.
      schema:
        $ref: "#/components/schemas/SimulateRequest"
  result:
    name: Simulation result
    description: The result of the simulation.
    schema:
      $ref: "#/components/schemas/SimulateResult"
  examples:
    - name: eth_simulateV1 example
      params:
        - name: Simulation object
          value:
            blockStateCalls:
              - blockOverrides:
                  baseFeePerGas: "0x9"
                stateOverrides:
                  "0xc000000000000000000000000000000000000000":
                    balance: "0x4a817c800"
                calls:
                  - from: "0xc000000000000000000000000000000000000000"
                    to: "0xc000000000000000000000000000000000000001"
                    maxFeePerGas: "0xf"
                    value: "0x1"
                  - from: "0xc000000000000000000000000000000000000000"
                    to: "0xc000000000000000000000000000000000000002"
                    maxFeePerGas: "0xf"
                    value: "0x1"
            validation: true
            traceTransfers: true
        - name: Block
          value: "latest"
      result:
        name: Simulation result
        value:
          - baseFeePerGas: "0x9"
            blobGasUsed: "0x0"
            calls:
              - returnData: "0x"
                logs:
                  - address: "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"
                    topics:
                      - "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"
                      - "0x000000000000000000000000c000000000000000000000000000000000000000"
                      - "0x000000000000000000000000c000000000000000000000000000000000000001"
                    data: "0x0000000000000000000000000000000000000000000000000000000000000001"
                    blockNumber: "0x1530a5e"
                    transactionHash: "0x40e61ffc135d1d280646e8951141828e0fad81fd330b1c1a75454163f8c8ca34"
                    transactionIndex: "0x0"
                    blockHash: "0x105b451ea332730fe2d316d983b9a406b6d4a022ee6e83e02bcae17a94f8c87b"
                    logIndex: "0x0"
                    removed: false
                gasUsed: "0x5208"
                status: "0x1"
              - returnData: "0x"
                logs:
                  - address: "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"
                    topics:
                      - "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"
                      - "0x000000000000000000000000c000000000000000000000000000000000000000"
                      - "0x000000000000000000000000c000000000000000000000000000000000000002"
                    data: "0x0000000000000000000000000000000000000000000000000000000000000001"
                    blockNumber: "0x1530a5e"
                    transactionHash: "0x204d575c2f68b43a32423bc05491e8dafa71913e3e6d223aa5128cbd23562ecd"
                    transactionIndex: "0x1"
                    blockHash: "0x105b451ea332730fe2d316d983b9a406b6d4a022ee6e83e02bcae17a94f8c87b"
                    logIndex: "0x1"
                    removed: false
                gasUsed: "0x5208"
                status: "0x1"
            difficulty: "0x0"
            excessBlobGas: "0x3b80000"
            extraData: "0x"
            gasLimit: "0x22550dd"
            gasUsed: "0xa410"
            hash: "0x105b451ea332730fe2d316d983b9a406b6d4a022ee6e83e02bcae17a94f8c87b"
            logsBloom: "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
            miner: "0x1f9090aae28b8a3dceadf281b0f12828e676c326"
            mixHash: "0x0000000000000000000000000000000000000000000000000000000000000000"
            nonce: "0x0000000000000000"
            number: "0x1530a5e"
            parentBeaconBlockRoot: "0x0000000000000000000000000000000000000000000000000000000000000000"
            parentHash: "0x513a0aa73024f294cdbcb0312af0c920850035f0552d7349ebb30717de30b1cc"
            receiptsRoot: "0x75308898d571eafb5cd8cde8278bf5b3d13c5f6ec074926de3bb895b519264e1"
            sha3Uncles: "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"
            size: "0x29c"
            stateRoot: "0x65ea44c8bd5f9edbf269b6446b460b3e7378abb25c78fd5d70f0e2ef59296b25"
            timestamp: "0x67f43327"
            transactions:
              - "0x40e61ffc135d1d280646e8951141828e0fad81fd330b1c1a75454163f8c8ca34"
              - "0x204d575c2f68b43a32423bc05491e8dafa71913e3e6d223aa5128cbd23562ecd"
            transactionsRoot: "0xd6902f31ae9d2169b77cd88611c6afd691ea5a7e604e44c71f663fda0c5d1c28"
            uncles: []
            withdrawals: []
            withdrawalsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"

SimulateRequest:
  type: object
  description: One item in the eth_simulateV1 params array.
  properties:
    object:
      $ref: "#/components/schemas/SimulateObject"
      description: The main simulation data (overrides, calls, etc.).
    quantity:
      $ref: "#/components/schemas/BlockNumberOrTag"
      description: The block number or tag on which to execute the simulation.

SimulateObject:
  type: object
  description: The simulation request object containing transaction calls and optional overrides.
  properties:
    blockOverrides:
      $ref: "#/components/schemas/BlockOverrides"
    stateOverrides:
      $ref: "#/components/schemas/StateOverrides"
    calls:
      type: array
      description: An array of transaction call objects.
      items:
        $ref: "#/components/schemas/CallObject"
    validation:
      type: boolean
      description: Whether to perform validation checks.
    traceTransfers:
      type: boolean
      description: Whether to trace value transfers.

BlockOverrides:
  type: object
  description: Overrides for block-level parameters.
  properties:
    baseFeePerGas:
      $ref: "#/components/schemas/uint"
      description: The base fee per gas for the block, encoded as hex.

StateOverrides:
  type: object
  description: An object to override account states, keyed by address.
  # Each key should be a valid address (0x...40 hex chars).
  # Each value is an object describing state overrides (e.g., balance).
  additionalProperties:
    type: object
    properties:
      balance:
        $ref: "#/components/schemas/uint"
        description: The new balance to set for the account, encoded as hex.

CallObject:
  type: object
  description: A transaction call object used during simulation.
  properties:
    from:
      $ref: "#/components/schemas/address"
      description: The sender of the transaction.
    to:
      $ref: "#/components/schemas/address"
      description: The recipient of the transaction.
    maxFeePerGas:
      $ref: "#/components/schemas/uint"
      description: The maximum fee per gas the sender is willing to pay.
    value:
      $ref: "#/components/schemas/uint"
      description: The value sent with the transaction, hex-encoded.

##
## Simulation response objects
##

SimulateResult:
  type: array
  description: The top-level array returned by eth_simulateV1, containing one or more simulated blocks.
  items:
    $ref: "#/components/schemas/SimulatedBlock"

SimulatedBlock:
  type: object
  description: A simulated “block-like” object containing the results of the calls plus standard block fields.
  properties:
    baseFeePerGas:
      $ref: "#/components/schemas/uint"
    blobGasUsed:
      $ref: "#/components/schemas/uint"
    calls:
      type: array
      items:
        $ref: "#/components/schemas/SimulatedCall"
    difficulty:
      $ref: "#/components/schemas/uint"
    excessBlobGas:
      $ref: "#/components/schemas/uint"
    extraData:
      $ref: "#/components/schemas/bytes"
    gasLimit:
      $ref: "#/components/schemas/uint"
    gasUsed:
      $ref: "#/components/schemas/uint"
    hash:
      $ref: "#/components/schemas/hash32"
    logsBloom:
      $ref: "#/components/schemas/bytes"
    miner:
      $ref: "#/components/schemas/address"
    mixHash:
      $ref: "#/components/schemas/hash32"
    nonce:
      $ref: "#/components/schemas/bytes8"
    number:
      $ref: "#/components/schemas/uint"
    parentBeaconBlockRoot:
      $ref: "#/components/schemas/hash32"
    parentHash:
      $ref: "#/components/schemas/hash32"
    receiptsRoot:
      $ref: "#/components/schemas/hash32"
    sha3Uncles:
      $ref: "#/components/schemas/hash32"
    size:
      $ref: "#/components/schemas/uint"
    stateRoot:
      $ref: "#/components/schemas/hash32"
    timestamp:
      $ref: "#/components/schemas/uint"
    transactions:
      type: array
      items:
        $ref: "#/components/schemas/hash32"
    transactionsRoot:
      $ref: "#/components/schemas/hash32"
    uncles:
      type: array
      items:
        $ref: "#/components/schemas/hash32"
    withdrawals:
      type: array
      items:
        type: object
        properties:
          index:
            $ref: "#/components/schemas/uint"
          validatorIndex:
            $ref: "#/components/schemas/uint"
          address:
            $ref: "#/components/schemas/address"
          amount:
            $ref: "#/components/schemas/uint"
    withdrawalsRoot:
      $ref: "#/components/schemas/hash32"

SimulatedCall:
  type: object
  description: The result of a single call within the block simulation.
  properties:
    returnData:
      $ref: "#/components/schemas/bytes"
    logs:
      type: array
      items:
        $ref: "#/components/schemas/Log"
    gasUsed:
      $ref: "#/components/schemas/uint"
    status:
      $ref: "#/components/schemas/uint"
