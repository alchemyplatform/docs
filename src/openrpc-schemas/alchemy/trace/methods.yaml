- name: alchemy_trace_block
  summary: Returns traces created at a given block.
  params:
    - name: blockIdentifier
      required: true
      description: >
        Block identifier as an integer block number (in hex) or one of the tags:
        "earliest", "latest", or "pending".
      schema:
        type: string
  result:
    name: Block Traces
    description: Array of block trace objects.
    schema:
      type: array
      items:
        type: object
        properties:
          action:
            type: object
            description: Trace action details.
            properties:
              callType:
                type: string
              from:
                $ref: "#/components/schemas/address"
              gas:
                type: string
              input:
                type: string
              to:
                $ref: "#/components/schemas/address"
              value:
                type: string
          blockHash:
            type: string
          blockNumber:
            type: integer
          result:
            type: object
            properties:
              gasUsed:
                type: string
              output:
                type: string
          subtraces:
            type: integer
          traceAddress:
            type: array
            items:
              type: string
          transactionHash:
            type: string
          transactionPosition:
            type: integer
          type:
            type: string
  examples:
    - name: alchemy_trace_block example
      params:
        - name: blockIdentifier
          value: "0x2ed119"
      result:
        name: Block Traces Example
        value:
          - action:
              callType: "call"
              from: "0xaa7b131dc60b80d3cf5e59b5a21a666aa039c951"
              gas: "0x0"
              input: "0x"
              to: "0xd40aba8166a212d6892125f079c33e6f5ca19814"
              value: "0x4768d7effc3fbe"
            blockHash: "0x7eb25504e4c202cf3d62fd585d3e238f592c780cca82dacb2ed3cb5b38883add"
            blockNumber: 3068185
            result:
              gasUsed: "0x0"
              output: "0x"
            subtraces: 0
            traceAddress: []
            transactionHash: "0x07da28d752aba3b9dd7060005e554719c6205c8a3aea358599fc9b245c52f1f6"
            transactionPosition: 0
            type: "call"

- name: alchemy_trace_call
  summary: Executes a call and returns one or more possible traces.
  params:
    - name: transaction
      required: true
      description: >
        Transaction call object. Contains call parameters such as "from", "to",
        "gas", "gasPrice", "value", and "data".
      schema:
        type: object
        properties:
          from:
            $ref: "#/components/schemas/address"
          to:
            $ref: "#/components/schemas/address"
          gas:
            type: string
          gasPrice:
            type: string
          value:
            type: string
          data:
            type: string
    - name: traceTypes
      required: true
      description: >
        Array of trace types to return. Valid values include "trace" and "stateDiff".
      schema:
        type: array
        items:
          type: string
          enum:
            - trace
            - stateDiff
    - name: blockIdentifier
      required: false
      description: >
        Optional block identifier (block number in hex, block hash, or tag like "latest").
      schema:
        type: string
  result:
    name: Trace Object
    description: Returns the trace result for the given call.
    schema:
      type: object
      properties:
        output:
          type: string
        stateDiff:
          type: string
          nullable: true
        trace:
          type: array
          items:
            type: object
            properties:
              action:
                type: object
              error:
                type: string
                nullable: true
              subtraces:
                type: integer
              traceAddress:
                type: array
                items:
                  type: string
              type:
                type: string
        vmTrace:
          type: string
          nullable: true
  examples:
    - name: alchemy_trace_call example
      params:
        - name: transaction
          value:
            from: "0x6f1FB6EFDf50F34bFA3F2bC0E5576EdD71631638"
            to: "0x1E0447b19BB6EcFdAe1e4AE1694b0C3659614e4e"
            value: "0x0"
            data: "0xa67a6a45000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000"
        - name: traceTypes
          value: [ "trace" ]
        - name: blockIdentifier
          value: "latest"
      result:
        name: Trace Object Example
        value:
          output: "0x"
          stateDiff: null
          trace:
            - action:
                callType: "call"
                from: "0x6f1fb6efdf50f34bfa3f2bc0e5576edd71631638"
                gas: "0x1dcd11f8"
                input: "0xa67a6a45000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000"
                to: "0x1e0447b19bb6ecfdae1e4ae1694b0c3659614e4e"
                value: "0x0"
              error: "Reverted"
              subtraces: 0
              traceAddress: []
              type: "call"
          vmTrace: null

- name: alchemy_trace_get
  summary: Returns the trace at a given position for a transaction.
  params:
    - name: transactionHash
      required: true
      description: Transaction hash.
      schema:
        type: string
    - name: traceIndexes
      required: true
      description: >
        Array of trace index positions (in hex) to retrieve from the transaction.
      schema:
        type: array
        items:
          type: string
  result:
    name: Trace Object
    description: Returns the trace object corresponding to the provided index(es).
    schema:
      type: object
      properties:
        action:
          type: object
        blockHash:
          type: string
        blockNumber:
          type: integer
        result:
          type: object
          properties:
            gasUsed:
              type: string
            output:
              type: string
        subtraces:
          type: integer
        traceAddress:
          type: array
          items:
            type: string
        transactionHash:
          type: string
        transactionPosition:
          type: integer
        type:
          type: string
  examples:
    - name: alchemy_trace_get example
      params:
        - name: transactionHash
          value: "0x17104ac9d3312d8c136b7f44d4b8b47852618065ebfa534bd2d3b5ef218ca1f3"
        - name: traceIndexes
          value: [ "0x0" ]
      result:
        name: Trace Object Example
        value:
          action:
            callType: "call"
            from: "0x1c39ba39e4735cb65978d4db400ddd70a72dc750"
            gas: "0x13e99"
            input: "0x16c72721"
            to: "0x2bd2326c993dfaef84f696526064ff22eba5b362"
            value: "0x0"
          blockHash: "0x7eb25504e4c202cf3d62fd585d3e238f592c780cca82dacb2ed3cb5b38883add"
          blockNumber: 3068185
          result:
            gasUsed: "0x183"
            output: "0x0000000000000000000000000000000000000000000000000000000000000001"
          subtraces: 0
          traceAddress: [ "0x0" ]
          transactionHash: "0x17104ac9d3312d8c136b7f44d4b8b47852618065ebfa534bd2d3b5ef218ca1f3"
          transactionPosition: 2
          type: "call"

- name: alchemy_trace_rawTransaction
  summary: Traces a raw transaction (calls eth_sendRawTransaction without executing it).  
  description: >
    **Deprecated:** This method is no longer supported at the node client level.
  params:
    - name: rawTransactionData
      required: true
      description: Raw transaction data as a hex string.
      schema:
        type: string
    - name: traceTypes
      required: true
      description: >
        Array of trace types to return. Valid values include "trace" and "stateDiff".
      schema:
        type: array
        items:
          type: string
          enum:
            - trace
            - stateDiff
  result:
    name: Trace Object
    description: Returns the trace result for the raw transaction.
    schema:
      type: object
      properties:
        output:
          type: string
        stateDiff:
          type: string
          nullable: true
        trace:
          type: array
          items:
            type: object
            properties:
              action:
                type: object
              subtraces:
                type: integer
              traceAddress:
                type: array
                items:
                  type: string
              type:
                type: string
        vmTrace:
          type: string
          nullable: true
  examples:
    - name: alchemy_trace_rawTransaction example
      params:
        - name: rawTransactionData
          value: "0xd46e8dd67c5d32be8d46e8dd67c5d32be8058bb8eb970870f072445675058bb8eb970870f072445675"
        - name: traceTypes
          value: [ "trace" ]
      result:
        name: Trace Object Example
        value:
          output: "0x"
          stateDiff: null
          trace:
            - action: { callType: "call" }
          vmTrace: null

- name: alchemy_trace_replayBlockTransactions
  summary: Replays all transactions in a block and returns traces for each.
  params:
    - name: blockIdentifier
      required: true
      description: >
        Block identifier as a block number (in hex), block hash, or tag.
      schema:
        type: string
    - name: traceTypes
      required: true
      description: >
        Array of trace types to return. Valid values include "trace" and "stateDiff".
      schema:
        type: array
        items:
          type: string
          enum:
            - trace
            - stateDiff
  result:
    name: Block Transaction Traces
    description: Returns an array of transaction trace objects for the block.
    schema:
      type: array
      items:
        type: object
        properties:
          output:
            type: string
          stateDiff:
            type: string
            nullable: true
          trace:
            type: array
            items:
              type: object
              properties:
                action:
                  type: object
                subtraces:
                  type: integer
                traceAddress:
                  type: array
                  items:
                    type: string
                type:
                  type: string
          transactionHash:
            type: string
          vmTrace:
            type: string
            nullable: true
  examples:
    - name: alchemy_trace_replayBlockTransactions example
      params:
        - name: blockIdentifier
          value: "0x2ed119"
        - name: traceTypes
          value: [ "trace" ]
      result:
        name: Block Transaction Traces Example
        value:
          - output: "0x"
            stateDiff: null
            trace:
              - action: { callType: "call" }
                subtraces: 0
                traceAddress: []
                type: "call"
            transactionHash: "0x07da28d752aba3b9dd7060005e554719c6205c8a3aea358599fc9b245c52f1f6"
            vmTrace: null

- name: alchemy_trace_replayTransaction
  summary: Replays a transaction and returns its trace result without executing the call.
  params:
    - name: transactionHash
      required: true
      description: Transaction hash.
      schema:
        type: string
    - name: traceTypes
      required: true
      description: >
        Array of trace types to return. Valid values include "trace" and "stateDiff".
      schema:
        type: array
        items:
          type: string
          enum:
            - trace
            - stateDiff
  result:
    name: Trace Object
    description: Returns the trace result for the transaction.
    schema:
      type: object
      properties:
        output:
          type: string
        stateDiff:
          type: string
          nullable: true
        trace:
          type: array
          items:
            type: object
            properties:
              action:
                type: object
              subtraces:
                type: integer
              traceAddress:
                type: array
                items:
                  type: string
              type:
                type: string
        vmTrace:
          type: string
          nullable: true
  examples:
    - name: alchemy_trace_replayTransaction example
      params:
        - name: transactionHash
          value: "0x02d4a872e096445e80d05276ee756cefef7f3b376bcec14246469c0cd97dad8f"
        - name: traceTypes
          value: [ "trace" ]
      result:
        name: Trace Object Example
        value:
          output: "0x"
          stateDiff: null
          trace:
            - action: { callType: "call" }
              subtraces: 0
              traceAddress: []
              type: "call"
          vmTrace: null

- name: alchemy_trace_transaction
  summary: Returns all traces for a given transaction.
  params:
    - name: transactionHash
      required: true
      description: Transaction hash.
      schema:
        type: string
  result:
    name: Transaction Traces
    description: Returns an array of trace objects for the specified transaction.
    schema:
      type: array
      items:
        type: object
        properties:
          action:
            type: object
          blockHash:
            type: string
          blockNumber:
            type: integer
          result:
            type: object
            properties:
              gasUsed:
                type: string
              output:
                type: string
          subtraces:
            type: integer
          traceAddress:
            type: array
            items:
              type: string
          transactionHash:
            type: string
          transactionPosition:
            type: integer
          type:
            type: string
  examples:
    - name: alchemy_trace_transaction example
      params:
        - name: transactionHash
          value: "0x17104ac9d3312d8c136b7f44d4b8b47852618065ebfa534bd2d3b5ef218ca1f3"
      result:
        name: Transaction Traces Example
        value:
          - action:
              callType: "call"
              from: "0x83806d539d4ea1c140489a06660319c9a303f874"
              gas: "0x1a1f8"
              input: "0x"
              to: "0x1c39ba39e4735cb65978d4db400ddd70a72dc750"
              value: "0x7a16c911b4d00000"
            blockHash: "0x7eb25504e4c202cf3d62fd585d3e238f592c780cca82dacb2ed3cb5b38883add"
            blockNumber: 3068185
            result:
              gasUsed: "0x2982"
              output: "0x"
            subtraces: 2
            traceAddress: []
            transactionHash: "0x17104ac9d3312d8c136b7f44d4b8b47852618065ebfa534bd2d3b5ef218ca1f3"
            transactionPosition: 2
            type: "call"

- name: alchemy_trace_filter
  summary: Returns traces that match the given filter criteria.
  params:
    - name: filter
      required: true
      description: >
        Filter object with optional parameters:
        - fromBlock: starting block (in hex; default "0xc26f54")
        - toBlock: ending block (in hex; default "0xc26f54")
        - fromAddress: array of sender addresses
        - toAddress: array of receiver addresses
        - after: offset trace number
        - count: number of traces to return
      schema:
        type: object
        properties:
          fromBlock:
            type: string
            default: "0xc26f54"
          toBlock:
            type: string
            default: "0xc26f54"
          fromAddress:
            type: array
            items:
              $ref: "#/components/schemas/address"
          toAddress:
            type: array
            items:
              $ref: "#/components/schemas/address"
          after:
            type: string
          count:
            type: integer
  result:
    name: Filtered Traces
    description: Returns an array of trace objects that match the filter.
    schema:
      type: array
      items:
        type: object
        properties:
          action:
            type: object
          blockHash:
            type: string
          blockNumber:
            type: integer
          result:
            type: object
            properties:
              gasUsed:
                type: string
              output:
                type: string
          subtraces:
            type: integer
          traceAddress:
            type: array
            items:
              type: string
          transactionHash:
            type: string
          transactionPosition:
            type: integer
          type:
            type: string
  examples:
    - name: alchemy_trace_filter example
      params:
        - name: filter
          value:
            fromBlock: "0xc26f54"
            toBlock: "0xc26f54"
      result:
        name: Filtered Traces Example
        value:
          - action:
              callType: "call"
              from: "0x15dce17509846b420b1f5c158fe3d7518204abb6"
              gas: "0xed2a4"
              input: "0x..."
              to: "0x000000000000abe945c436595ce765a8a261317b"
              value: "0x0"
            blockHash: "0xe0583a364c20fa67748ca92e276df63919c67e12fdc9bdbc17deae8cf730cf35"
            blockNumber: 12742484
            result:
              gasUsed: "0x4551d"
              output: "0x00000000000000000000000000000000000000000000000000d96b96f61c5e87"
            subtraces: 12
            traceAddress: []
            transactionHash: "0x87951d0547018db2c4817282a53e2015d91934b42d1b8d8bba1bef7cb480f263"
            transactionPosition: 0
            type: "call"