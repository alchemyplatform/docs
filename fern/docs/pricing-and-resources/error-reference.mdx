# Identifying an Error Request

When using Alchemy (and in general, web3 development), to understand if your JSON-RPC request was successful or encountered an error, follow these steps:

1. Check the **HTTP Status Code** of the response:
   - If the status code is **not** within the `2xx` range, the request failed.
   - If the status code is within the `2xx` range, proceed to the next step.
2. Check the **error field** in the JSON response body:
   - If an `error` field is present, the request encountered an error.
   - If no `error` field is present, the request was successful.

Here are examples of how HTTP responses may look:

- **Success** (HTTP status is `2xx` and no error field in the response):
  ```json
  {"jsonrpc":"2.0","id":0,"result":"0x127776c"}
  ```

- **Failed** (HTTP status is `2xx` but the error field is populated):
  ```json
  {"jsonrpc":"2.0","error":{"code":-32002,"message":"Transaction simulation failed"}}
  ```

Understanding these responses is important for accurately determining the outcome of your requests.

# HTTP Status Codes

HTTP Status codes are standardized numeric codes that are returned by our servers in response to a client's HTTP requests. In general, there are 3 categories of HTTP codes that you might encounter when using Alchemy: `2xx` , `4xx`, and `5xx`. HTTP error response can have any combination of JSON-RPC error codes (even for `2xx` responses). Below are example HTTP error codes and potential solutions. 

> 🚧 `200` HTTP response does not necessarily mean the request was successful.
> 
> `200` HTTP response indicates that we were able to receive and respond to the request successfully, but there may have been issues actually executing that request on the nodes or on-chain. For example, if you send an `eth_call` request and the gas is too low, you’d get back a `200` HTTP response but a `3`  JSON-RPC error code and an error message indicating `execution reverted` since gas is too low.

<table class="error-codes-table">
  <thead>
    <tr>
      <th>Category</th>
      <th>HTTP Code</th>
      <th>Example JSON-RPC Codes</th>
      <th>Example Error Message</th>
      <th>Meaning</th>
      <th>Example Solution</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>2xx</code></td>
      <td><code>200</code></td>
      <td>Any</td>
      <td>
        <ul>
          <li><code>execution reverted</code></li>
          <li><code>err: intrinsic gas too low (supplied gas 50000000)</code></li>
          <li><code>filter not found</code></li>
          <li><code>already known</code></li>
        </ul>
      </td>
      <td><strong>Success</strong>: the request was received by the client and returned successfully by the server, however, the request may have encountered issues while being processed on chain.</td>
      <td>Verify that your request is valid.</td>
    </tr>
    <tr>
      <td><code>4xx</code></td>
      <td></td>
      <td></td>
      <td></td>
      <td><strong>Client Error</strong>: the client had an issue when sending the request</td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td><code>400</code></td>
      <td><code>-32700</code>, <code>-32602</code>, <code>-32600</code>, <code>-32521</code>, <code>-32500</code></td>
      <td>
        <ul>
          <li><code>Unsupported method</code></li>
          <li><code>Invalid &lt;nth&gt; argument</code></li>
          <li><code>Parse error</code></li>
        </ul>
      </td>
      <td><strong>Bad Request</strong>: The request is invalid (e.g incorrect format)</td>
      <td>Verify your request body and format is correct.</td>
    </tr>
    <tr>
      <td></td>
      <td><code>401</code></td>
      <td><code>-32600</code></td>
      <td>
        <ul>
          <li><code>Must be authenticated!</code></li>
          <li><code>Invalid access key</code></li>
        </ul>
      </td>
      <td><strong>Unauthorized</strong>: You must authenticate your request with an API key. Check out how to <a href="https://docs.alchemy.com/docs/alchemy-quickstart-guide#1key-create-an-alchemy-key">create an Alchemy key</a> if you do not have one.</td>
      <td>Create a new API key</td>
    </tr>
    <tr>
      <td></td>
      <td><code>403</code></td>
      <td><code>-32600</code></td>
      <td>
        <ul>
          <li><code>Monthly capacity limit exceeded.</code></li>
          <li><code>App is inactive.</code></li>
          <li><code>Origin not on whitelist.</code></li>
        </ul>
      </td>
      <td><strong>Forbidden</strong>: the server has received the request successfully, but is intentionally refusing to process it due to some missing criteria.</td>
      <td>
        <ul>
          <li>Upgrade tiers to increase capacity</li>
          <li>Create a new API key</li>
          <li>Update allowlist to permit request origin.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td></td>
      <td><code>429</code></td>
      <td><code>429</code></td>
      <td><code>Your app has exceeded its compute units per second capacity.</code></td>
      <td><strong>Too Many Requests</strong>: You've exceeded your concurrent requests capacity or <a href="https://docs.alchemy.com/reference/compute-units">compute units</a> per second capacity. Check out the <a href="https://docs.alchemy.com/reference/throughput">throughput</a> page for solutions.</td>
      <td>
        <ul>
          <li>Upgrade to increase throughput</li>
          <li>Implement <a href="https://docs.alchemy.com/docs/how-to-implement-retries">automatic retries</a></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><code>5xx</code></td>
      <td></td>
      <td></td>
      <td></td>
      <td><strong>Server Error</strong>: there was an error processing the request on the server side.</td>
      <td>Check out the <a href="https://status.alchemy.com/">status page</a> for the latest updates.</td>
    </tr>
    <tr>
      <td></td>
      <td><code>500</code></td>
      <td><code>-3200</code> <code>-32603</code></td>
      <td>
        <ul>
          <li><code>Unable to complete request at this time.</code></li>
          <li><code>Block &lt;block number&gt; not processed yet. Please try again.</code></li>
          <li><code>internal server error</code></li>
        </ul>
      </td>
      <td><strong>Server error</strong>: unable to complete the request due to server issues or due to the block not being processed yet</td>
      <td>
        <ul>
          <li>See the <a href="https://status.alchemy.com/">status page</a> for latest updates</li>
          <li>Ensure the requested block is valid, then retry</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td></td>
      <td><code>503</code></td>
      <td><code>-3200</code></td>
      <td><code>Unable to complete request at this time.</code></td>
      <td><strong>Server error</strong>: unable to complete the request due to server issues</td>
      <td>See the <a href="https://status.alchemy.com/">status page</a> for latest updates</td>
    </tr>
  </tbody>
</table>

# JSON-RPC Error Codes

For JSON-RPC specific errors, you may receive any of the above HTTP Error codes in addition to the JSON RPC error codes specified below. 

Error codes range from `-32768` to `-32000`, any code in this range but not defined explicitly is reserved for future use or application-specific errors. For more info on how these are defined check out the [JSON-RPC Error specification docs](https://www.jsonrpc.org/specification#error_object). 

<table class="error-codes-table">
  <thead>
    <tr>
      <th>Code</th>
      <th>Example Error Message</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>-32700</code></td>
      <td><code>Parse error</code></td>
      <td><strong>Parse error</strong>: Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text.</td>
    </tr>
    <tr>
      <td><code>-32600</code></td>
      <td>
        <p><code>Must be authenticated!</code></p>
        <p><code>Invalid access key</code></p>
      </td>
      <td><strong>Invalid Request</strong>: The JSON sent is not a valid Request object.</td>
    </tr>
    <tr>
      <td><code>-32601</code></td>
      <td><code>Unsupported method: &lt;method&gt;.</code></td>
      <td><strong>Method not found</strong>: The method does not exist / is not available.</td>
    </tr>
    <tr>
      <td><code>-32602</code></td>
      <td><code>invalid &lt;nth&gt; argument:</code></td>
      <td><strong>Invalid params</strong>: Invalid method parameter(s).</td>
    </tr>
    <tr>
      <td><code>-32603</code></td>
      <td><code>internal server error</code></td>
      <td><strong>Internal error</strong>: Internal JSON-RPC error.</td>
    </tr>
    <tr>
      <td><code>-32000</code> to <code>-32099</code></td>
      <td><code>Unable to complete request at this time.</code></td>
      <td><strong>Server error</strong>: Reserved for implementation-defined server-errors.</td>
    </tr>
    <tr>
      <td>
        <p><code>-32099</code> to <code>-32599</code></p>
        <p><strong>or</strong></p>
        <p><code>-32603</code> to <code>-32699</code></p>
        <p><strong>or</strong></p>
        <p><code>-32701</code> to <code>-32768</code></p>
      </td>
      <td>
        <p><code>-32500</code>: <code>AA20 account not deployed</code>, <code>AA25 invalid account nonce</code></p>
        <p><code>-32501</code>: <code>COLLECT_LIMIT_EXCEEDED</code>, <code>user operation's call reverted: 0x</code></p>
      </td>
      <td><strong>Any</strong>: Application-defined error or other.</td>
    </tr>
    <tr>
      <td><code>3</code></td>
      <td><code>execution reverted</code></td>
      <td>Generally used for <code>eth_call</code>, <code>eth_estimateGas</code>, <code>alchemy_getTokenBalances</code>. The <code>data</code> field in the error response will have more details on the root cause.</td>
    </tr>
    <tr>
      <td><code>20</code> to <code>63</code></td>
      <td><code>Starknet specific errors</code></td>
      <td>Errors related to Starknet methods. See <a href="https://docs.starkware.co/starkex/api/spot/error_codes.html">https://docs.starkware.co/starkex/api/spot/error_codes.html</a> for more details.</td>
    </tr>
  </tbody>
</table>

# Error Messages

Below are a few common error messages and how to solve them.

| Error Message                             | Meaning                                                                                                                                                                                                    | Solution                                                                                   |
| ----------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ |
| `already known`                           | This generally means the transaction already posted and is on the node in a pending state. Sometimes this error occurs when transactions fail at first but are retried when the node already knows of them | Check if you’ve already sent a transaction with the same nonce.                            |
| `Unspecified origin not on whitelist`     | Whoever is making the request is not on the allowlist for your API key.                                                                                                                                    | Safely ignore the request or update your app’s allowlist to include the new request origin |
| `filter not found`                        | Filters expire after 5 minutes of inactivity so if it's not found the filter likely expired.                                                                                                               | Create a new filter.                                                                       |
| `Request timed out. Client should retry.` | Gateway timeouts (usually from nodes).                                                                                                                                                                     | Retry the request.                                                                         |
| `transaction underpriced`                 | Transaction was sent with too low gas.                                                                                                                                                                     | Retry the transaction with higher gas.                                                     |

# Common Errors

## How to Solve ENOTFOUND getAddrInfo Errors

**ENOTFOUND getAddrInfo** error is a common issue encountered by developers when trying to make network requests to a specific URL that might not exist any longer.

To resolve this issue, you need to update the URL from `eth-mainnet.alchemy.io` to `eth-mainnet.g.alchemy.com`. Open your application where you are making requests to the old URL and replace it with the new one.

**Before**:

JavaScript

`const apiUrl = '<https://eth-mainnet.alchemy.io/v2/YOUR_API_KEY'>;`

**After**:

JavaScript

`const apiUrl = '<https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY'>;`

Save the changes you made to your application and run it again. The ENOTFOUND getAddrInfo error should no longer occur since you are now using the updated URL. To confirm that the error has been resolved, check your application's output or script, and you should see successful network requests to the new URL without any ENOTFOUND errors.

## How to solve `ECONNRESET` errors?

`ECONNRESET` errors occur when a TCP connection cannot be established at that time. If you experience `ECONNRESET` errors, please ensure that your client isn not creating a scenario where new connections are unable to be created. Historically, we have only seen client-side issues causing these errors (if the server were rejecting requests indiscriminately, then it would obviously effect multiple clients simultaneously which has never been the case). If you’re hitting a generic `EPROTO` error message, it’s possible you’re facing similar issues.

Here are some guidelines to limit client side issues:

1. If you’re using AWS, a NAT gateway can support up to [55,000](https://docs.aws.amazon.com/vpc/latest/userguide/nat-gateway-troubleshooting.html) simultaneous connections (or approximately 900 connections per second/55,000 connections per minute). Ensure your rate of opening new connections falls within the threshold!
   1. If in AWS, check NAT Gateway for port ErrorPortAllocation errors ([guide](https://repost.aws/knowledge-center/vpc-resolve-port-allocation-errors))
   2. If not in AWS, check to make sure source ports aren’t exhausted
2. For Java, consider implementing a [connection pools](https://www.baeldung.com/httpclient-connection-management).
3. For node.js, consider using [options.keepAlive](https://nodejs.org/api/http.html#http_new_agent_options) to keep the TCP connection alive!
4. Consider enabling HTTP Pipeline (in which you can send more than one request per TCP connection)
5. Ensure systems outside of your production environment are are also not creating too many requests!

If these guidelines don’t help, please request support on our [discord](https://discord.com/invite/alchemyplatform) or email [support@alchemy.com](mailto:support@alchemy.com).

# How we define “successful” vs. “failed” requests in the dashboard

The dashboard includes various charts that indicate the number of successful or failed request across your applications. A few examples of these include:

[Daily Request Health Pie on the Homepage](https://dashboard.alchemy.com/)

<img src="https://files.readme.io/d4a292c-Untitled.png" alt="Untitled" style="display: block; margin: 0 auto;"></img>

[Request Health Chart on the Homepage](https://dashboard.alchemy.com/)

<img src="https://files.readme.io/52e9aab-Untitled_1.png" alt="Untitled" style="display: block; margin: 0 auto;"></img>

Several other pages including apps list, app details, logs, and more. 

The definitions used for “success” and “failure” throughout the dashboard are the following:

- **Success:** HTTP status code is `2xx` **and** the `response.error` field is empty (null).
- **Failure:** Any condition that does not meet the success criteria.

These definitions ensure a straightforward approach to interpreting dashboard metrics and aligns with the actual HTTP responses you receive.